# âš«ï¸âšªï¸ Weiqi.kids Light-Go è¨ˆç•«

---

## ğŸ“ å°ˆæ¡ˆç›®éŒ„çµæ§‹

```
Light-Go/
â”œâ”€â”€ main.py
â”œâ”€â”€ hf_models/                     # HFæ¨¡å‹ç›®éŒ„
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ configuration_go_ai.py     # HFé…ç½®é¡
â”‚   â”œâ”€â”€ modeling_go_ai.py          # HFæ¨¡å‹é¡
â”‚   â”œâ”€â”€ tokenization_go_ai.py      # ä½ç½®ç·¨ç¢¼å™¨
â”‚   â””â”€â”€ processing_go_ai.py        # æ•¸æ“šé è™•ç†å™¨
â”‚
â”œâ”€â”€ input/                         # ğŸ§  å°‡è¼¸å…¥ç«¯è³‡æ–™çµ±ä¸€è®Šæˆæ£‹ç›¤è¼¸å…¥çŸ©é™£ liberty èˆ‡ forbidden
â”‚ â”œâ”€â”€ sgf_to_input.py              # è™•ç† SGF æª”æ¡ˆè¼¸å…¥
â”‚ â”œâ”€â”€ katago_to_input.py           # è™•ç† KataGo trainingdata æª”æ¡ˆè¼¸å…¥
â”‚ â”œâ”€â”€ gtp_to_input.py              # è™•ç† Go Text Protocol è¼¸å…¥
â”‚ â””â”€â”€ streaming_to_input.py        # è™•ç† æ£‹ç›¤ä¸²æµå½±åƒ è¼¸å…¥
â”‚
â”œâ”€â”€ core/                          # æ–°å¢æ ¸å¿ƒé‚è¼¯
â”‚ â”œâ”€â”€ engine.py                    # ä¸»å¼•æ“
â”‚ â”œâ”€â”€ strategy_manager.py          # è‡ªå‹•ç®¡ç†æ‰€æœ‰ç­–ç•¥
â”‚ â””â”€â”€ auto_learner.py              # è‡ªå‹•å­¸ç¿’å’Œç™¼ç¾
â”‚
â”œâ”€â”€ data/
â”‚ â”œâ”€â”€ models                       # ä¿å­˜è¨“ç·´çµæœ
â”‚ â”‚ â”œâ”€â”€ strategies                 # å­¸ç¿’åˆ°çš„å„ç¨®ç­–ç•¥
â”‚ â”‚ â”‚ â”œâ”€â”€ a.pkl + a.pt             # ç­–ç•¥çŸ¥è­˜ a æ¨¡å‹èˆ‡åˆ†é…å™¨æ¬Šé‡
â”‚ â”‚ â”‚ â”œâ”€â”€ b.pkl + b.pt             # ç­–ç•¥çŸ¥è­˜ b æ¨¡å‹èˆ‡åˆ†é…å™¨æ¬Šé‡
â”‚ â”‚ â”‚ â””â”€â”€ ...
â”‚ â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€ narrator                   # è§£é‡‹å„ç¨®ç­–ç•¥çš„çš„å…§å®¹
â”‚ â”‚ â”‚ â”œâ”€â”€ beginner_style.pkl
â”‚ â”‚ â”‚ â”œâ”€â”€ professional_style.pkl
â”‚ â”‚ â”‚ â””â”€â”€ humorous_style.pkl
â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€ time # å­¸ç¿’åˆ°çš„æ™‚é–“åˆ†é…
â”‚ â”‚   â”œâ”€â”€ v1.pkl + v1.pt           # v1 å­¸ç¿’åˆ°çš„æ™‚é–“åˆ†é…æ¨¡å‹èˆ‡åˆ†é…å™¨æ¬Šé‡
â”‚ â”‚   â””â”€â”€ playerA.pkl + playerA.pt # playerA å­¸ç¿’åˆ°çš„æ™‚é–“åˆ†é…æ¨¡å‹èˆ‡åˆ†é…å™¨æ¬Šé‡
â”‚ â”‚ 
â”‚ â”œâ”€â”€ memory                       # ç›¤é¢ç‹€æ³è¨˜éŒ„
â”‚ â”‚ â””â”€â”€ qdrant                     # Qdrant ç´€éŒ„æª”
â”‚ â”‚ 
â”‚ â””â”€â”€ sgf                          # å°å±€ç´€éŒ„
â”‚
â”œâ”€â”€ tests/                         # ğŸ†• æ¸¬è©¦æ¶æ§‹
â”‚ â”œâ”€â”€ unit_tests/
â”‚ â”œâ”€â”€ integration_tests/
â”‚ â””â”€â”€ performance_tests/
â”‚
â”œâ”€â”€ tools/                         # ğŸ†• å·¥å…·è…³æœ¬
â”‚ â”œâ”€â”€ train_strategy.py            # è¨“ç·´æ–°ç­–ç•¥
â”‚ â”œâ”€â”€ evaluate_models.py           # æ¨¡å‹è©•ä¼°
â”‚ â”œâ”€â”€ self_play_generator.py       # ç”Ÿæˆè‡ªå°å¼ˆæ•¸æ“š
â”‚ â””â”€â”€ deploy_to_production.py      # éƒ¨ç½²å·¥å…·
â”‚
â”œâ”€â”€ monitoring/
â”‚ â”œâ”€â”€ performance.py               # æ•ˆèƒ½ç›£æ§
â”‚ â”œâ”€â”€ logging.py                   # æ—¥èªŒç®¡ç†
â”‚ â””â”€â”€ health_check.py              # å¥åº·æª¢æŸ¥
â”‚
â””â”€â”€ api/                           # ğŸ†• APIæ¥å£
  â”œâ”€â”€ rest_api.py                  # REST API
  â”œâ”€â”€ websocket_api.py             # WebSocket API
  â””â”€â”€ gtp_interface.py             # GTPå”è­°æ¥å£
```

---

## ğŸš€ å•Ÿå‹•æ¨¡å¼è¨­è¨ˆ

### ğŸ•¹ å„ç¨®æœå‹™æ¨¡å¼

1. APIæœå‹™æ¨¡å¼ï¼ˆæœ€å¸¸ç”¨ï¼‰

```
python main.py --mode api --port 8080
```

å•Ÿå‹•å¾Œå¯ä»¥æ¥æ”¶HTTPè«‹æ±‚ï¼š
 - POST /api/move
 - POST /api/analyze
 - GET /api/strategies

2. GTPå”è­°æ¨¡å¼ï¼ˆèˆ‡å…¶ä»–è»Ÿä»¶å°æ¥ï¼‰

```
python main.py --mode gtp
```

å•Ÿå‹•å¾Œç­‰å¾…GTPå‘½ä»¤ï¼š
 - boardsize 19
 - play black D4
 - genmove white

3. å–®æ¬¡æ±ºç­–æ¨¡å¼ï¼ˆå¿«é€Ÿæ¸¬è©¦ï¼‰

```
python main.py --mode single --input game.sgf --move 50
```

æˆ–è€…

```
python main.py --mode single --liberty "[(3,4,3),(5,6,-2)]" --forbidden "[(9,10)]"
```

4. å­¸ç¿’/è¨“ç·´æ¨¡å¼

```
python main.py --mode train --data data/training/ --output data/models/strategies/
```
è‡ªå‹•å­¸ç¿’æ–°ç­–ç•¥

---

## ğŸ§  æ£‹ç›¤è¼¸å…¥çŸ©é™£ä»‹ç´¹ liberty èˆ‡ forbidden ï¼ˆéœæ…‹ç‰¹å¾µï¼‰ input/

è¼¸å…¥ï¼š
- liberty æ¯å€‹æ£‹å­ä½ç½®(xåº§æ¨™, yåº§æ¨™, æ°£)çš„ç„¡åºé›†åˆï¼Œé»‘æ£‹æ­£æ•¸ã€ç™½æ£‹è² æ•¸ â†’ ç°¡å–®çš„3ç¶­å‘é‡
- forbidden ç¦è‘—é»ä½ç½®
- éš¨æ©Ÿæ´—ç‰Œï¼šæ¶ˆé™¤é †åºåè¦‹
- ä½¿ç”¨ `core.liberty.count_liberties()` å¯ä»¥åœ¨å–å¾—æ£‹ç›¤å¾Œé‡æ–°è¨ˆç®—å„æ£‹å­çš„æ°£æ•¸

```
liberty = [
  (3, 4, 3),  # é»‘æ£‹3æ°£
  (5, 6, -2), # ç™½æ£‹2æ°£
  // ... åªåŒ…å«æ£‹å­çš„ä½ç½®ï¼Œç©ºé»ä¸æœƒå‡ºç¾
]
```

```
forbidden = [
  (9, 10),  # ä½ç½®(9,10)æ˜¯ç¦è‘—é»
  // ... åªåŒ…å«ç¦è‘—çš„ä½ç½®
]
```

```
metadata = {
  "rules": {                 # ğŸ†• è¦å‰‡è¨­å®š
    "ruleset": "chinese",    # ä¸­åœ‹è¦å‰‡/æ—¥æœ¬è¦å‰‡/éŸ“åœ‹è¦å‰‡
    "komi": 7.5,             # è²¼ç›®
    "board_size": 19,        # æ£‹ç›¤å¤§å°
    "handicap": 0            # è®“å­æ•¸
  },
  "capture": {
    "black": 1,              # é»‘æ£‹æå­
    "white": 1,              # ç™½æ£‹æå­
  },
  "next_move": "black",      # ä¸‹ä¸€æ­¥é¡è‰²
  "step": []                 # å°å±€æ­¥é©Ÿ,
  "time_control": {
    "main_time_seconds": 600,
    "byo_yomi": {
      "period_time_seconds": 30,
      "periods": 3
    }
  },
  "time": [{
    "player": "black",       # é»‘æ–¹
    "main_time_seconds": 100 # åŸºæœ¬æ™‚é™å‰©é¤˜ç§’æ•¸
    "periods": 3             # byo_yomi å‰©é¤˜æ¬¡æ•¸
  },{
    "player": "white",       # ç™½æ–¹
    "main_time_seconds": 100 # åŸºæœ¬æ™‚é™å‰©é¤˜ç§’æ•¸
    "periods": 2             # byo_yomi å‰©é¤˜æ¬¡æ•¸
  }]
}
```

---

## ğŸ§ª å‹•æ…‹èƒå–ç™¼ç¾å±¤ï¼šç³»çµ±è‡ªå‹•ç”Ÿæˆçš„ç‹€æ…‹ data/models/strategies

ç³»çµ±é‹è¡Œæ™‚ï¼š
- è‡ªå‹•å˜—è©¦æ‰€æœ‰å¯ç”¨ç­–ç•¥
- è‡ªå‹•è©•ä¼°å“ªå€‹æœ€é©åˆç•¶å‰å±€é¢
- è‡ªå‹•å­¸ç¿’å’Œæ›´æ–°ç­–ç•¥
- è‡ªå‹•ç™¼ç¾æ–°ç­–ç•¥ä¸¦ä¿å­˜ç‚ºæ–°æ–‡ä»¶

```
ç‰¹å¾µç™¼ç¾ç¶²çµ¡ï¼š
â”œâ”€â”€ ç·¨ç¢¼å™¨ï¼šå°‡ç›¤é¢ç·¨ç¢¼ç‚ºé«˜ç¶­æ½›åœ¨ç©ºé–“
â”œâ”€â”€ æ¢ç´¢å™¨ï¼šåœ¨æ½›åœ¨ç©ºé–“ä¸­å°‹æ‰¾æœ‰æ„ç¾©çš„æ–¹å‘
â”œâ”€â”€ è§£ç¢¼å™¨ï¼šå°‡æ½›åœ¨ç‰¹å¾µè½‰å›å¯è§£é‡‹çš„æ¦‚å¿µ
â””â”€â”€ é©—è­‰å™¨ï¼šæ¸¬è©¦æ–°ç‰¹å¾µçš„é æ¸¬èƒ½åŠ›
```

æ–°ç­–ç•¥è‡ªå‹•å‡ºç¾ï¼š
a.pkl â†’ b.pkl â†’ c.pkl â†’ d.pkl â†’ ...

```
ç³»çµ±è‡ªå‹•å­¸æœƒï¼š
â”œâ”€â”€ ä»€éº¼æ™‚å€™ç”¨å“ªå€‹ç­–ç•¥
â”œâ”€â”€ å¦‚ä½•åˆ†é…æ€è€ƒæ™‚é–“
â”œâ”€â”€ å¦‚ä½•ç™¼ç¾æ–°çš„æ¨¡å¼
â””â”€â”€ å¦‚ä½•æŒçºŒæ”¹é€²
```

---

## â³ ç”¨æ™‚åˆ†é…  data/models/time

ä¾ç…§ä¸åŒã€Œstrategies è€—æ™‚ã€èˆ‡ã€Œç•¶ä¸‹å‰©é¤˜æ™‚é–“ã€ï¼Œæ±ºå®šçš„ç”¨æ™‚åˆ†é…ç­–ç•¥ã€‚

--- 

## ğŸ§‘â€ğŸ« ä¸åŒé¢¨æ ¼çš„è§£èªª data/narrator

--- 

## ğŸ“¦ æ›¾ç¶“ä¸‹éçš„å±€é¢èˆ‡è¬›è§£ç´€éŒ„ï¼Œæ–¹ä¾¿èª¿é–±æ­·å²è³‡æ–™ data/memory/qdrant

---
